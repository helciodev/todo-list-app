(()=>{"use strict";const t=document.getElementById("list-input"),e=document.querySelector("[data-list-new]"),n=document.getElementById("list-title"),a=document.getElementById("tasks-list"),d=document.getElementById("add-task"),l=document.getElementById("task-input"),s=document.getElementById("task-input-modal"),o=document.getElementById("date-modal"),i=document.getElementById("option-modal"),r=document.getElementById("description-modal"),c=document.getElementById("save-btn-modal"),u=document.getElementById("task-render"),m=document.getElementById("date"),g=document.getElementById("option"),p=document.getElementById("description"),y=document.getElementById("task-count"),v=document.getElementById("list-container"),k="task.lists",E=document.getElementById("modal-parent"),I=t=>{for(;t.firstChild;)t.removeChild(t.firstChild)},x=t=>{I(v),t.forEach((t=>{const e=document.createElement("li");e.setAttribute("class","text-2xl cursor-pointer my-2 text-gray-100 uppercase"),e.dataset.listId=t.id,e.textContent=t.name,e.insertAdjacentHTML("beforeend",`\n  <i data-element = ${t.id} class="fa cursor-pointer fa-times-circle" aria-hidden="true"></i>`),v.appendChild(e)}))},f=t=>{const e=t.tasks.filter((t=>1==!t.complete)).length;return 1===e?`${e} task remaining`:`${e} tasks remaining`},B=t=>{I(a),t.tasks.forEach(((t,e)=>{const n=document.importNode(u.content,!0);n.querySelector("#task-title").textContent=t.name,n.getElementById("due-date-display").textContent=t.dueDate;const d=n.getElementById("priority-display");var l;d.textContent=t.priority,"low"===(l=d).textContent?l.classList.add("text-gray-500","font-bold"):"medium"===l.textContent?l.classList.add("text-yellow-500","font-bold"):l.classList.add("text-red-500","font-bold"),n.querySelector("#description-para").textContent=t.description;const s=n.querySelector("input");s.classList.add("checked"),s.checked=t.complete,[s,n.getElementById("edit"),n.getElementById("delete")].forEach((t=>{t.dataset.taskIndex=e})),a.appendChild(n)}))};window.addEventListener("load",function(){let a=JSON.parse(localStorage.getItem(k))||[{id:Date.now().toString(),name:"default",tasks:[]}],u=a[a.length-1]||"";const I=document.getElementById("tasks");I.classList.remove(".hidden");const h=()=>{localStorage.setItem(k,JSON.stringify(a)),localStorage.setItem("selected.list",JSON.stringify(u))};x(a),B(u),v.addEventListener("click",(t=>{u=a.find((e=>e.id===t.target.dataset.listId)),h(),"li"===t.target.tagName.toLowerCase()&&(I.classList.remove("hidden"),n.textContent=t.target.textContent,y.textContent=f(u)),B(u)}));const C=()=>{h(),x(a)};e.addEventListener("submit",(e=>{e.preventDefault();const n=t.value;if(null===n||""===n)return;const d=(l=n,{id:Date.now().toString(),name:l,tasks:[]});var l;t.value="",a.push(d),C()})),d.addEventListener("click",(()=>{const t=l.value,e=m.value,n=p.value,a=g.value;if(null===t||""===t)return;const d=((t,e,n,a,d=!1)=>({id:Date.now().toString(),name:t,priority:e,dueDate:n,description:a,complete:d}))(t,a,e,n);l.value="",p.value="",m.value=null,u.tasks.push(d),h(),B(u),y.textContent=f(u)})),v.addEventListener("click",(t=>{a=a.filter((e=>e.id!==t.target.dataset.element)),C()})),window.addEventListener("click",(t=>{var e;"delete"===t.target.id?(u.tasks.splice(t.target.dataset.taskIndex,1),h(),B(u),y.textContent=f(u)):"checkbox"===t.target.id?(t.target.checked?u.tasks[t.target.dataset.taskIndex].complete=!0:u.tasks[t.target.dataset.taskIndex].complete=!1,h(),x(a),B(u),y.textContent=f(u)):"edit"!==t.target.id&&"close-btn"!==t.target.id||(E.classList.toggle("center"),e=u.tasks[t.target.dataset.taskIndex],s.value=e.name,o.value=e.dueDate,i.value=e.priority,r.value=e.description,c.addEventListener("click",(()=>{(t=>{const e=s.value;null!==e&&""!==e&&(t.name=e,null===i.value&&""===i.value||(t.priority=i.value),null===r.value&&""===r.value||(t.description=r.value),null===o.value&&""===o.value||(t.dueDate=o.value))})(u.tasks[t.target.dataset.taskIndex]),E.classList.toggle("center"),B(u),h()})))})),localStorage&&(x(a),B(u))}())})();