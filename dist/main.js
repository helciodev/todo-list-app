(()=>{const e=document.getElementById("list-container"),t="task.lists";let n=JSON.parse(localStorage.getItem(t))||[];const d=document.getElementById("list-input"),s=document.querySelector("[data-list-new]"),o=document.getElementById("list-title"),l=document.getElementById("tasks"),i=document.getElementById("tasks-list"),a=document.getElementById("add-task"),c=document.getElementById("task-input"),r=document.getElementById("task-render");let m=n[n.length-1]||"";function u(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function g(){localStorage.setItem(t,JSON.stringify(n)),localStorage.setItem("selected.list",JSON.stringify(m))}function p(){u(e),n.forEach((t=>{const n=document.createElement("li");n.setAttribute("class","text-2xl cursor-pointer my-2 text-gray-100 uppercase"),n.dataset.listId=t.id,n.textContent=t.name,n.insertAdjacentHTML("beforeend",`\n    <i data-element = ${t.id} class="fa cursor-pointer fa-times-circle" aria-hidden="true"></i>`),e.appendChild(n)}))}function f(){u(i),m.tasks.forEach(((e,t)=>{const n=document.importNode(r.content,!0);n.querySelector("#task-title").textContent=e.name,n.querySelector("#description").textContent=e.description;const d=n.querySelector("input");d.classList.add("checked"),d.checked=e.complete,[d,n.getElementById("edit"),n.getElementById("delete")].forEach((e=>{e.dataset.listId=t})),console.log(i.lastChild),i.appendChild(n)}))}function y(){g(),p()}l.classList.remove(".hidden"),e.addEventListener("click",(e=>{m=n.find((t=>t.id===e.target.dataset.listId)),g(),console.log(m),"li"===e.target.tagName.toLowerCase()&&(l.classList.remove("hidden"),o.textContent=e.target.textContent),f(),console.log(m)})),s.addEventListener("submit",(e=>{e.preventDefault(),console.log(m);const t=(s=d.value,{id:Date.now().toString(),name:s,tasks:[]});var s;d.value="",n.push(t),y()})),a.addEventListener("click",(()=>{const e=(t=c.value,{id:Date.now().toString(),name:t,complete:!1,description:undefined,dueDate:undefined,priority:undefined});var t;c.value="",m.tasks.push(e),g(),f()})),e.addEventListener("click",(e=>{n=n.filter((t=>t.id!==e.target.dataset.element)),console.log(n.length),console.log(m),y()})),window.addEventListener("click",(e=>{"delete"===e.target.id&&(m.tasks.splice(e.target.dataset.listId,1),console.log(e.target.dataset.listId),g(),f())})),localStorage&&p()})();

