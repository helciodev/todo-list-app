(()=>{const t=document.getElementById("list-container"),e="task.lists";let n=JSON.parse(localStorage.getItem(e))||[];const a=document.getElementById("list-input"),d=document.querySelector("[data-list-new]"),l=document.getElementById("list-title"),s=document.getElementById("tasks"),o=document.getElementById("tasks-list"),i=document.getElementById("add-task"),r=document.getElementById("task-input"),c=document.getElementById("task-input-modal"),m=document.getElementById("date-modal"),u=document.getElementById("option-modal"),g=document.getElementById("description-modal"),p=document.getElementById("save-btn-modal"),y=document.getElementById("task-render"),v=document.getElementById("date"),k=document.getElementById("option"),I=document.getElementById("description"),E=document.getElementById("task-count");let x=n[n.length-1]||"";const B=document.getElementById("modal-parent"),f=t=>{for(;t.firstChild;)t.removeChild(t.firstChild)};s.classList.remove(".hidden");const h=()=>{localStorage.setItem(e,JSON.stringify(n)),localStorage.setItem("selected.list",JSON.stringify(x))},C=()=>{f(t),n.forEach((e=>{const n=document.createElement("li");n.setAttribute("class","text-2xl cursor-pointer my-2 text-gray-100 uppercase"),n.dataset.listId=e.id,n.textContent=e.name,n.insertAdjacentHTML("beforeend",`\n    <i data-element = ${e.id} class="fa cursor-pointer fa-times-circle" aria-hidden="true"></i>`),t.appendChild(n)}))},L=()=>{f(o),x.tasks.forEach(((t,e)=>{const n=document.importNode(y.content,!0);n.querySelector("#task-title").textContent=t.name,n.getElementById("due-date-display").textContent=t.dueDate;const a=n.getElementById("priority-display");var d;a.textContent=t.priority,"low"===(d=a).textContent?d.classList.add("text-gray-500","font-bold"):"medium"===d.textContent?d.classList.add("text-yellow-500","font-bold"):d.classList.add("text-red-500","font-bold"),n.querySelector("#description-para").textContent=t.description;const l=n.querySelector("input");l.classList.add("checked"),l.checked=t.complete,[l,n.getElementById("edit"),n.getElementById("delete")].forEach((t=>{t.dataset.taskIndex=e})),o.appendChild(n)}))},S=()=>{const t=x.tasks.filter((t=>1==!t.complete)).length;return 1===t?`${t} task remaining`:`${t} tasks remaining`};t.addEventListener("click",(t=>{x=n.find((e=>e.id===t.target.dataset.listId)),h(),"li"===t.target.tagName.toLowerCase()&&(s.classList.remove("hidden"),l.textContent=t.target.textContent,E.textContent=S()),L()}));const b=()=>h();C(),d.addEventListener("submit",(t=>{t.preventDefault();const e=a.value;if(null===e||""===e)return;const d=(l=e,{id:Date.now().toString(),name:l,tasks:[]});var l;a.value="",n.push(d),b()})),i.addEventListener("click",(()=>{const t=r.value,e=v.value,n=I.value,a=k.value;if(null===t||""===t)return;const d=((t,e,n,a,d=!1)=>({id:Date.now().toString(),name:t,priority:e,dueDate:n,description:a,complete:d}))(t,a,e,n);r.value="",I.value="",v.value=null,x.tasks.push(d),h(),L(),E.textContent=S()})),t.addEventListener("click",(t=>{n=n.filter((e=>e.id!==t.target.dataset.element)),b()})),window.addEventListener("click",(t=>{var e;"delete"===t.target.id?(x.tasks.splice(t.target.dataset.taskIndex,1),h(),L(),E.textContent=S()):"checkbox"===t.target.id?(t.target.checked?x.tasks[t.target.dataset.taskIndex].complete=!0:x.tasks[t.target.dataset.taskIndex].complete=!1,h(),C(),L(),E.textContent=S()):"edit"!==t.target.id&&"close-btn"!==t.target.id||(B.classList.toggle("center"),e=x.tasks[t.target.dataset.taskIndex],c.value=e.name,m.value=e.dueDate,u.value=e.priority,g.value=e.description,p.addEventListener("click",(()=>{(t=>{const e=c.value;null!==e&&""!==e&&(t.name=e,null===u.value&&""===u.value||(t.priority=u.value),null===g.value&&""===g.value||(t.description=g.value),null===m.value&&""===m.value||(t.dueDate=m.value))})(x.tasks[t.target.dataset.taskIndex]),B.classList.toggle("center"),L(),h()})))})),localStorage&&(C(),L())})();