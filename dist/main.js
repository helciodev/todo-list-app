(()=>{const t=document.getElementById("list-container"),e="task.lists";let n=JSON.parse(localStorage.getItem(e))||[];const a=document.getElementById("list-input"),o=document.querySelector("[data-list-new]"),l=document.getElementById("list-title"),s=document.getElementById("tasks"),i=document.getElementById("tasks-list"),d=document.getElementById("add-task"),r=document.getElementById("task-input"),c=document.getElementById("task-render");let m=n[n.length-1]||"";function u(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function g(){localStorage.setItem(e,JSON.stringify(n))}function f(){u(t),n.forEach((e=>{const n=document.createElement("li");n.setAttribute("class","text-2xl cursor-pointer my-2 text-gray-100 uppercase"),n.dataset.listId=e.id,n.textContent=e.name,n.insertAdjacentHTML("beforeend",`\n    <i data-element = ${e.id} class="fa cursor-pointer fa-times-circle" aria-hidden="true"></i>`),t.appendChild(n)}))}function p(){u(i),m.tasks.forEach((t=>{const e=document.importNode(c.content,!0);e.querySelector("p").textContent=t.name,console.log(i.lastChild),i.appendChild(e)}))}function E(){g(),f()}s.classList.remove(".hidden"),t.addEventListener("click",(t=>{m=n.find((e=>e.id===t.target.dataset.listId)),console.log(m),"li"===t.target.tagName.toLowerCase()&&(s.classList.remove("hidden"),l.textContent=t.target.textContent),p(),console.log(m)})),o.addEventListener("submit",(t=>{t.preventDefault();const e=a.value;if(null===e||""===e)return;const o=(l=e,{id:Date.now().toString(),name:l,tasks:[]});var l;a.value="",n.push(o),E()})),d.addEventListener("click",(()=>{const t=r.value;if(null===t||""===t)return;const e=(n=t,{id:Date.now(),name:n,complete:!1,priority:"low"});var n;r.value="",m.tasks.push(e),g(),p()})),t.addEventListener("click",(t=>{n=n.filter((e=>e.id!==t.target.dataset.element)),E()})),localStorage&&f()})();