(()=>{const e=document.getElementById("list-container"),t="task.lists";let n=JSON.parse(localStorage.getItem(t))||[];const d=document.getElementById("list-input"),a=document.querySelector("[data-list-new]"),s=document.getElementById("list-title"),l=document.getElementById("tasks"),i=document.getElementById("tasks-list"),o=document.getElementById("add-task"),c=document.getElementById("task-input"),r=document.getElementById("task-render");let m=n[n.length-1]||"";function u(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function g(){localStorage.setItem(t,JSON.stringify(n)),localStorage.setItem("selected.list",JSON.stringify(m))}function f(){u(e),n.forEach((t=>{const n=document.createElement("li");n.setAttribute("class","text-2xl cursor-pointer my-2 text-gray-100 uppercase"),n.dataset.listId=t.id,n.textContent=t.name,n.insertAdjacentHTML("beforeend",`\n    <i data-element = ${t.id} class="fa cursor-pointer fa-times-circle" aria-hidden="true"></i>`),e.appendChild(n)}))}function p(){u(i),m.tasks.forEach(((e,t)=>{const n=document.importNode(r.content,!0);n.querySelector("p").textContent=e.name;const d=n.querySelector("input");d.classList.add("checked"),d.checked=e.complete,[d,n.getElementById("edit"),n.getElementById("delete")].forEach((e=>{e.dataset.listId=t})),console.log(i.lastChild),i.appendChild(n)}))}function E(){g(),f()}l.classList.remove(".hidden"),document.addEventListener("DOMContentLoaded",(()=>{localStorage["selected.list"]&&(l.classList.remove("hidden"),s.textContent=m.name,p())})),e.addEventListener("click",(e=>{m=n.find((t=>t.id===e.target.dataset.listId)),g(),console.log(m),"li"===e.target.tagName.toLowerCase()&&(l.classList.remove("hidden"),s.textContent=e.target.textContent),p(),console.log(m)})),a.addEventListener("submit",(e=>{e.preventDefault();const t=d.value;if(null===t||""===t)return;const a=(s=t,{id:Date.now().toString(),name:s,tasks:[]});var s;d.value="",n.push(a),E()})),o.addEventListener("click",(()=>{const e=c.value;if(null===e||""===e)return;const t=(n=e,{id:Date.now().toString(),name:n,complete:!1,priority:undefined,dueDate:undefined});var n;c.value="",m.tasks.push(t),g(),p()})),e.addEventListener("click",(e=>{n=n.filter((t=>t.id!==e.target.dataset.element)),E()})),window.addEventListener("click",(e=>{"delete"===e.target.id&&(m.tasks.splice(e.target.dataset.listId,1),console.log(e.target.dataset.listId),g(),p())})),localStorage&&f()})();